<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ch√∫t ng·ªçt ng√†o cho b·∫°n g√°i ngta</title>
<style>
/* CSS cho trang "index" */
body {
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    overflow: hidden;
    background: linear-gradient(to bottom, #ff69b4, #ffc0cb); /* Gradient m√†u n·ªÅn h·ªìng */
}

.rose {
    position: relative;
    width: 800px;
    height: 600px;
    overflow: hidden;
}

.rose img {
    position: absolute;
    width: 30%;
    height: 35%;
    opacity: 0;
}

.rose img:nth-child(1) {
    top: 0;
    right: 70%;
    transition: opacity 1s ease-in-out;
}

.rose img:nth-child(3) {
    bottom: 30%;
    right: 10%;
    transition: opacity 3s ease-in-out;
}

.rose img:nth-child(2) {
    top: 0;
    left: 70%;
    transition: opacity 1.5s ease-in-out;
}

.rose img:nth-child(4) {
    bottom: 30%;
    left: 10%;
    transition: opacity 3.5s ease-in-out;
}

.rose img:nth-child(5) {
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    transition: opacity 5s ease-in-out;
}

.rose img:nth-child(6) {
    bottom: 60%;
    left: 50%;
    transform: translateX(-50%);
    width: 25%;
    height: 30%;
    transition: opacity 6s ease-in-out;
}

.rose:hover img {
    opacity: 1;
}

.snowflake {
    position: absolute;
    color: #fff;
    font-size: 20px;
    animation: fall linear infinite;
}

@keyframes fall {
    0% {
        transform: translateY(-10vh);
    }
    100% {
        transform: translateY(100vh);
    }
}

.rose span {
    position: absolute;
    color: white;
    font-size: 24px;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    font-weight: bold;
    opacity: 0;
    transition: opacity 0.5s ease-in-out;
}

.rose:hover span {
    opacity: 1;
}

#nextButton {
    position: absolute;
    bottom: 20px;
    right: 20px;
    padding: 10px 20px;
    background-color: #fff;
    color: #ffc0cb;
    border: none;
    font-size: 18px;
    font-weight: bold;
    cursor: pointer;
    border-radius: 5px;
    transition: background-color 0.3s ease;
}

/* CSS cho trang "heart" */
#heartPage {
    display: none;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #000;
}

canvas {
    position: absolute;
    width: 100%;
    height: 100%;
}

.message {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 2.8em;
    color: #dd20b0;
    text-align: center;
    font-family: 'Comic Sans MS', cursive, sans-serif;
}

.heart {
    display: inline-block;
    color: red;
    animation: pulse 1.5s infinite;
}

@keyframes pulse {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.2);
    }
    100% {
        transform: scale(1);
    }
}
</style>
</head>
<body>

<!-- Trang "index" -->
<div id="indexPage">
    <div class="rose">
        <img src="templates/gf1.jpg" alt="ntbtyn 1">
        <img src="templates/gf2.jpg" alt="ntbtyn 2">
        <img src="templates/gf4.jpg" alt="ntbtyn 3">
        <img src="templates/gf3.jpg" alt="ntbtyn 4">
        <img src="templates/gf6.jpg" alt="ntbtyn 5">
        <img src="templates/gf5.jpg" alt="ntbtyn 6">
        <span id="cink" style="top: 5%; right: 32%;">Ch√∫c b·∫°n g√°i hung d·ªØ,</span>
        <span id="ngoan" style="top: 18%; right: 29%;">kh√≥ t√≠nh, kh√≥ chi·ªÅu c·ªßa ngta</span>
        <span id="ngoan1" style="top: 30%; right: 30%;">ng√†y 14/2 thi·ªát h·∫°nh ph√∫c</span>
        <span id="iu" style="top: 43%; right: 42%;">b√™n b·∫°n trai</span>
        <span id="iu1" style="top: 55%; right: 42%;">nh√≥o‚ù§Ô∏èüòâ</span>
    </div>
    <button id="nextButton">Next</button>
</div>

<!-- Trang "heart" -->
<div id="heartPage">
    <canvas id="pinkboard"></canvas>
    <div class="message">D√†nh cho c·ªï<span class="heart">‚ù§Ô∏è</span></div>
</div>

<script>
// Script t·∫°o hi·ªáu ·ª©ng tuy·∫øt r∆°i cho trang "index"
document.addEventListener("DOMContentLoaded", function () {
    let container = document.querySelector("body");
    let nextButton = document.getElementById("nextButton");

    function createSnowflake() {
        let snowflake = document.createElement("div");
        snowflake.classList.add("snowflake");
        snowflake.style.left = Math.random() * window.innerWidth + "px";
        snowflake.style.animationDuration = Math.random() * 3 + 2 + "s";
        snowflake.innerHTML = "‚ùÑ";

        container.appendChild(snowflake);

        setTimeout(() => {
            snowflake.remove();
        }, 5000);
    }

    setInterval(createSnowflake, 100);

    // Hi·ªÉn th·ªã t·ª´ng ch·ªØ 'cink', 'ngoan', 'iu'
    setTimeout(() => {
        document.getElementById('cink').style.opacity = 1;
    }, 500);
    setTimeout(() => {
        document.getElementById('ngoan').style.opacity = 1;
    }, 1500);
    setTimeout(() => {
      document.getElementById('ngoan1').style.opacity = 1;
  }, 2500);
    setTimeout(() => {
        document.getElementById('iu').style.opacity = 1;
    }, 3500);
    setTimeout(() => {
        document.getElementById('iu1').style.opacity = 1;
    }, 4500);
    setTimeout(() => {
        document.getElementById('cink').style.opacity = 0;
        document.getElementById('ngoan').style.opacity = 0;
        document.getElementById('ngoan1').style.opacity = 0;
        document.getElementById('iu').style.opacity = 0;
        document.getElementById('iu1').style.opacity = 0;
    }, 6000);
    // Sau 4 gi√¢y bi·∫øn m·∫•t c√°c d√≤ng ch·ªØ, hi·ªÉn th·ªã tu·∫ßn t·ª± c√°c h√¨nh ·∫£nh
    setTimeout(() => {
        document.getElementById('cink').style.opacity = 0;
        document.getElementById('ngoan').style.opacity = 0;
        document.getElementById('ngoan1').style.opacity = 0;
        document.getElementById('iu').style.opacity = 0;
        document.getElementById('iu1').style.opacity = 0;

        setTimeout(() => {
            document.querySelectorAll('.rose img').forEach((img, index) => {
                setTimeout(() => {
                    img.style.opacity = 1;
                }, index * 250); // Hi·ªÉn th·ªã tu·∫ßn t·ª± m·ªói h√¨nh ·∫£nh sau 0.5 gi√¢y
            });
        }, 250);

    }, 6000);
    // Khi b·∫•m v√†o n√∫t "Next", chuy·ªÉn sang trang "heart"
    nextButton.addEventListener("click", function () {
        document.getElementById("indexPage").style.display = "none";
        document.getElementById("heartPage").style.display = "block";
        startHeartAnimation();
    });

    // T·ª± ƒë·ªông chuy·ªÉn trang sau 8 gi√¢y
    setTimeout(() => {
        nextButton.click();
    }, 14000);
});

// Script t·∫°o hi·ªáu ·ª©ng heart cho trang "heart"
function startHeartAnimation() {
    var settings = {
        particles: {
            length: 500,
            duration: 2,
            velocity: 100,
            effect: -0.75,
            size: 30,
        },
    };

    var Point = (function() {
        function Point(x, y) {
            this.x = (typeof x !== 'undefined') ? x : 0;
            this.y = (typeof y !== 'undefined') ? y : 0;
        }
        Point.prototype.clone = function() {
            return new Point(this.x, this.y);
        };
        Point.prototype.length = function(length) {
            if (typeof length == 'undefined')
                return Math.sqrt(this.x * this.x + this.y * this.y);
            this.normalize();
            this.x *= length;
            this.y *= length;
            return this;
        };
        Point.prototype.normalize = function() {
            var length = this.length();
            this.x /= length;
            this.y /= length;
            return this;
        };
        return Point;
    })();

    var Particle = (function() {
        function Particle() {
            this.position = new Point();
            this.velocity = new Point();
            this.acceleration = new Point();
            this.age = 0;
        }
        Particle.prototype.initialize = function(x, y, dx, dy) {
            this.position.x = x;
            this.position.y = y;
            this.velocity.x = dx;
            this.velocity.y = dy;
            this.acceleration.x = dx * settings.particles.effect;
            this.acceleration.y = dy * settings.particles.effect;
            this.age = 0;
        };
        Particle.prototype.update = function(deltaTime) {
            this.position.x += this.velocity.x * deltaTime;
            this.position.y += this.velocity.y * deltaTime;
            this.velocity.x += this.acceleration.x * deltaTime;
            this.velocity.y += this.acceleration.y * deltaTime;
            this.age += deltaTime;
        };
        Particle.prototype.draw = function(context, image) {
            var size = image.width * (1 - this.age / settings.particles.duration);
            context.globalAlpha = 1 - this.age / settings.particles.duration;
            context.drawImage(image, this.position.x - size / 2, this.position.y - size / 2, size, size);
        };
        return Particle;
    })();

    var ParticlePool = (function() {
        var particles,
            firstActive = 0,
            firstFree = 0,
            duration = settings.particles.duration;

        function ParticlePool(length) {
            particles = new Array(length);
            for (var i = 0; i < particles.length; i++)
                particles[i] = new Particle();
        }
        ParticlePool.prototype.add = function(x, y, dx, dy) {
            particles[firstFree].initialize(x, y, dx, dy);
            firstFree++;
            if (firstFree == particles.length) firstFree = 0;
            if (firstActive == firstFree) firstActive++;
            if (firstActive == particles.length) firstActive = 0;
        };
        ParticlePool.prototype.update = function(deltaTime) {
            var i;
            if (firstActive < firstFree) {
                for (i = firstActive; i < firstFree; i++)
                    particles[i].update(deltaTime);
            }
            if (firstFree < firstActive) {
                for (i = firstActive; i < particles.length; i++)
                    particles[i].update(deltaTime);
                for (i = 0; i < firstFree; i++)
                    particles[i].update(deltaTime);
            }
            while (particles[firstActive].age >= duration && firstActive != firstFree) {
                firstActive++;
                if (firstActive == particles.length) firstActive = 0;
            }
        };
        ParticlePool.prototype.draw = function(context, image) {
            if (firstActive < firstFree) {
                for (var i = firstActive; i < firstFree; i++)
                    particles[i].draw(context, image);
            }
            if (firstFree < firstActive) {
                for (var i = firstActive; i < particles.length; i++)
                    particles[i].draw(context, image);
                for (var i = 0; i < firstFree; i++)
                    particles[i].draw(context, image);
            }
        };
        return ParticlePool;
    })();

    (function(canvas) {
        var context = canvas.getContext('2d'),
            particles = new ParticlePool(settings.particles.length),
            particleRate = settings.particles.length / settings.particles.duration, // particles/sec
            time;

        function pointOnHeart(t) {
            return new Point(
                160 * Math.pow(Math.sin(t), 3),
                130 * Math.cos(t) - 50 * Math.cos(2 * t) - 20 * Math.cos(3 * t) - 10 * Math.cos(4 * t) + 25
            );
        }

        var image = (function() {
            var canvas = document.createElement('canvas'),
                context = canvas.getContext('2d');
            canvas.width = settings.particles.size;
            canvas.height = settings.particles.size;

            function to(t) {
                var point = pointOnHeart(t);
                point.x = settings.particles.size / 2 + point.x * settings.particles.size / 350;
                point.y = settings.particles.size / 2 - point.y * settings.particles.size / 350;
                return point;
            }

            context.beginPath();
            var t = -Math.PI;
            var point = to(t);
            context.moveTo(point.x, point.y);
            while (t < Math.PI) {
                t += 0.01;
                point = to(t);
                context.lineTo(point.x, point.y);
            }
            context.closePath();
            context.fillStyle = '#ea80b0';
            context.fill();

            var image = new Image();
            image.src = canvas.toDataURL();
            return image;
        })();

        function render() {
            requestAnimationFrame(render);

            var newTime = new Date().getTime() / 1000,
                deltaTime = newTime - (time || newTime);
            time = newTime;

            context.clearRect(0, 0, canvas.width, canvas.height);

            var amount = particleRate * deltaTime;
            for (var i = 0; i < amount; i++) {
                var pos = pointOnHeart(Math.PI - 2 * Math.PI * Math.random());
                var dir = pos.clone().length(settings.particles.velocity * Math.random());
                particles.add(canvas.width / 2 + pos.x, canvas.height / 2 - pos.y, dir.x, -dir.y);
            }

            particles.update(deltaTime);
            particles.draw(context, image);
        }

        function onResize() {
            canvas.width = canvas.clientWidth;
            canvas.height = canvas.clientHeight;
        }

        window.onresize = onResize;

        setTimeout(function() {
            onResize();
            render();
        }, 10);
    })(document.getElementById('pinkboard'));
}
</script>

</body>
</html>
